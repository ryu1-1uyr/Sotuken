<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<section id="display">
    <span id="label">Score:</span>
    <div id="score">0</div>
</section>

<canvas id="board" width="1000" height="800"></canvas>

<script>
    // const sleep1 = (sleepTime) => {
    //     let counter = 0
    //     let time = setInterval(()=>{
    //         console.log(counter)
    //         counter++
    //         if (sleepTime < counter) {
    //             console.log('sleeped')
    //             draw()
    //             clearInterval(time)
    //         }
    //     })
    // }

    function sleep(waitSec) {
        return new Promise(function (resolve) {
            setTimeout(function() { resolve() }, waitSec);
        });
    }



    // start();

    const canvas = document.getElementById('board');

    const ctx = canvas.getContext("2d");


    let movement = 50

    let x = 100
    let y = 50;

    ctx.fillStyle = "rgb(200,0,0)";
    ctx.fillRect(x, y, 50, 50);

    function moveright() {
        console.log('right')
        ctx.clearRect(0, 0, canvas.width, canvas.height)
        if (x < 900) {
            x += movement
            ctx.fillStyle = "rgb(200,0,0)";
            ctx.fillRect(x, y, 50, 50);


        } else {
            // ctx.fillStyle = "rgb(200,0,0)";
            // ctx.fillRect(x, y, 50, 50);
            // y += movement
        }
    }
    function moveleft() {
        console.log('left')
        ctx.clearRect(0, 0, canvas.width, canvas.height)
        if (x > 0) {
            x -= movement
            ctx.fillStyle = "rgb(200,0,0)";
            ctx.fillRect(x, y, 50, 50);


        } else {
            // ctx.fillStyle = "rgb(200,0,0)";
            // ctx.fillRect(x, y, 50, 50);
            // y += movement
        }
    }
    function moveup() {
        console.log('up')
        ctx.clearRect(0, 0, canvas.width, canvas.height)
        if (y  < 750) {
            ctx.fillStyle = "rgb(200,0,0)";
            y += movement
            ctx.fillRect(x, y, 50, 50);


        } else {
            // ctx.fillStyle = "rgb(200,0,0)";
            // ctx.fillRect(x, y, 50, 50);
            // y += movement
        }
    }
    function movedown() {
        console.log('down')
        ctx.clearRect(0, 0, canvas.width, canvas.height)
        if (y > 0) {
            ctx.fillStyle = "rgb(200,0,0)";
            y -= movement
            ctx.fillRect(x, y, 50, 50);


        } else {
            // ctx.fillStyle = "rgb(200,0,0)";
            // ctx.fillRect(x, y, 50, 50);
            // y += movement
        }
    }

    // async function start() {
    //     await sleep(2000);
    //     console.log('2秒経過しました');
    //     draw()
    //
    //     // await sleep(1000);
    //     // console.log('1秒経過しました');
    //     //
    //     // await sleep(3000);
    //     // console.log('3秒経過しました');
    // }

    // .then(() => {
    //     sleep(1000).then(() => {
    //         console.log('i')
    //         draw()
    //         //2つ目の命令
    //     })
    // })

    async function 非同期処理存在() {

        await sleep(400).then(() => {
            console.log('a')
            moveright()
            // 1つ目の命令 await から})まで自動生成できるクロージャーみたいなの作ると良さそう
        })

        await sleep(400).then(()=>{
            console.log('i')
            moveright()
            // 2つめ
        })

        await sleep(400).then(()=>{
            console.log('i')
            moveright()
            // 2つめ
        })

        await sleep(400).then(()=>{
            console.log('i')
            moveleft()
            // 2つめ
        })



    }
    非同期処理存在();

    // async function 非同期まとめ上げ存在() {
    //     await 非同期処理存在()
    //     await 非同期処理存在()
    //     await 非同期処理存在()
    //     await 非同期処理存在()
    // }
    //
    // async function 非同期顧問存在() {
    //     await 非同期まとめ上げ存在()
    //     await 非同期まとめ上げ存在()
    //     await 非同期まとめ上げ存在()
    //     await 非同期まとめ上げ存在()
    // }
    //
    // async function 非同期PTA存在() {
    //     await 非同期顧問存在()
    //     await 非同期顧問存在()
    //     await 非同期顧問存在()
    //     await 非同期顧問存在()
    // }
    //
    // async function 非同期教育委員会存在() {
    //     await 非同期PTA存在()
    //     await 非同期PTA存在()
    //     await 非同期PTA存在()
    //     await 非同期PTA存在()
    // }
    //
    // 非同期教育委員会存在()

    // for (let o = 0 ; o < 4 ; o++ ){
    //     非同期まとめ上げ存在()
    // }



    // setInterval(sleep1 , 10)

    window.addEventListener('keydown', event => {
        switch (event.key) {
            // console.log(event)

            case 'w':
                ctx.moveTo(x,y+=movement)

                // ctx.fillStyle = "rgba(0, 0, 200, 0.5)";
                // ctx.fillRect(10 , 10, x += movement , y );
                //
                // ctx.fillStyle = "rgb(256,256,256)";
                // ctx.fillRect(10 , 10 , x - movement , y )
                break
            case 'a':
                ctx.moveTo(x-=movement,y)

                // ctx.fillStyle = "rgba(0, 0, 200, 0.5)";
                // ctx.fillRect(10 , 10 , x , y += movement);
                //
                // ctx.fillStyle = "rgb(256,256,256)";
                // ctx.fillRect(10 , 10 , x , y - movement);

                break
            case 's':
                ctx.moveTo(x,y-=movement)

                // ctx.fillStyle = "rgba(0, 0, 200, 0.5)";
                // ctx.fillRect(10 , 10 , x -= movement, y);
                //
                // ctx.fillStyle = "rgb(256,256,256)";
                // ctx.fillRect(10 , 10 , 1000 - movement , y)
                break
            case 'd':

                ctx.moveTo(x+=movement,y)


                // ctx.fillStyle = "rgba(0, 0, 200, 0.5)";
                // ctx.fillRect(10, 10, x , y -= movement);
                //
                // ctx.fillStyle = "rgb(256,256,256)";
                // ctx.fillRect(10, 10, x , y + movement);

                break
            default :
            console.log(event)
        }

    })


    // function draw() {
    //     let canvas = document.getElementById("board");
    //     if (canvas.getContext) {
    //         let ctx = canvas.getContext("2d");
    //
    //         ctx.fillStyle = "rgb(200,0,0)";
    //         ctx.fillRect (10, 10, 50, 50);
    //
    //         ctx.fillStyle = "rgba(0, 0, 200, 0.5)";
    //         ctx.fillRect (30, 30, 50, 50);
    //     }
    // }


    // window.addEventListener('keydown',(event) => {
    //
    //     switch (event.key) {
    //         case "q" :
    //             console.log("pushed Q and playsound ")
    //             // initsound()
    //             // osc.start()
    //             sampleSound1.play()
    //
    //
    //             break
    //         case "w" :
    //             console.log("pushed W")
    //             sampleSound2.play()
    //             // initsound()
    //             break
    //         case "e" :
    //             console.log("pushed E")
    //             sampleSound3.play()
    //             // initsound()
    //             // playSound()
    //             break
    //         default :
    //         // console.log(event)
    //     }
    // })

</script>

</body>
</html>